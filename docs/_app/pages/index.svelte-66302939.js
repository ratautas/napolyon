var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(t,e)=>{for(var n in e||(e={}))l.call(e,n)&&i(t,n,e[n]);if(s)for(var n of s(e))o.call(e,n)&&i(t,n,e[n]);return t},r=(t,s)=>e(t,n(s));import{H as c,C as u,S as d,i as p,s as f,I as g,J as h,K as $,L as m,M as y,e as v,j as b,k as x,c as w,a as O,m as P,d as A,n as E,b as k,f as j,F as N,o as T,N as D,v as I,r as B,w as _,O as M,P as R,z as S,Q as V,R as U,T as H,U as C,V as L,W as F,X as q,t as W,g as K,h as Q,Y,l as G,B as J,u as X,Z as z,_ as Z,$ as tt,a0 as et,a1 as nt,a2 as st,a3 as lt,a4 as ot,G as it,a5 as at,a6 as rt,a7 as ct,p as ut,A as dt}from"../chunks/vendor-19a4cd93.js";const pt=u(null),ft=u(!0),gt=u(10),ht=u(null),$t=u(null),mt=u(null),yt=u(null),vt=u(null),bt=u({"stroke-width":"1",stroke:"rgba(255,255,255,.8)",fill:"rgba(0,0,0,.5)"});c(bt,(t=>Object.entries(t).reduce(((t,[e,n])=>[...t,{[e]:n}]),[])));const xt=u({L8EIvC:{attributes:{"stroke-width":"1",stroke:"rgba(255,255,255,.8)",fill:"rgba(0,0,0,.5)"},id:"L8EIvC",points:{LsJQaN:{x:615,y:45,id:"LsJQaN"},QyO1oa:{x:865,y:65,id:"QyO1oa"},jRfjxP:{x:865,y:245,id:"jRfjxP"},i0spdb:{x:560,y:107,id:"i0spdb"}}},DaNhAj:{attributes:{"stroke-width":"1",stroke:"rgba(255,255,255,.8)",fill:"rgba(0,0,0,.5)"},id:"DaNhAj",points:{YKdSHB:{x:678,y:247,id:"YKdSHB"},IHLh3o:{x:870,y:295,id:"IHLh3o"},ABqVA8:{x:858,y:497,id:"ABqVA8"},WH2UKA:{x:681,y:475,id:"WH2UKA"}}}}),wt=c([xt,yt],(([t,e])=>t[e]));c([wt,vt],(([t,e])=>t&&t.points[e])),c([xt,$t],(([t,e])=>t[e]));const Ot=c([xt,mt],(([t,e])=>t[e])),Pt={subscribe:xt.subscribe,addPolygon:t=>xt.update((e=>r(a({},e),{[t.id]:t}))),addPoint:(t,e)=>xt.update((n=>r(a({},n),{[t.id]:r(a({},t),{points:r(a({},t.points),{point:e})})}))),addAttribute:(t,e)=>xt.update((n=>r(a({},n),{[t.id]:r(a({},t),{attributes:r(a({},t.attributes),{[e.name]:e.value})})}))),movePoint:(t,e,n,s)=>xt.update((l=>r(a({},l),{[t.id]:r(a({},t),{points:r(a({},t.points),{[e]:{id:e,x:n,y:s}})})}))),moveAllPoints:(t,e,n)=>xt.update((s=>r(a({},s),{[t.id]:r(a({},t),{points:Object.values(t.points).reduce(((t,s)=>r(a({},t),{[s.id]:r(a({},s),{x:s.x+e,y:s.y+n})})),{})})}))),set:t=>xt.set(t)},At=c([xt],(([t])=>Object.values(t).reduce(((t,e)=>[...t,r(a({},e),{pointsMap:Object.values(e.points)})]),[]))),Et=c([At],(([t])=>t.map((t=>r(a({},t),{points:t.pointsMap.reduce(((t,{x:e,y:n})=>`${t} ${e},${n}`),"").replace(" ","")}))))),kt=(()=>{const{subscribe:t,set:e,update:n}=u(null);return{subscribe:t,addPoint:t=>n((e=>r(a({},e),{points:r(a({},e.points),{[t.id]:t})}))),set:t=>e(t)}})();function jt(t,e,n){const s=t.slice();return s[34]=e[n],s[35]=e,s[36]=n,s}function Nt(t){let e,n,s,l,o,i,a;function r(e){t[26](e)}let c={class:"snap__toggle",labelA:"",labelB:""};function u(e){t[27](e)}void 0!==t[10]&&(c.toggled=t[10]),n=new C({props:c}),H.push((()=>L(n,"toggled",r)));let d={disabled:!t[10],hideTextInput:!0,labelText:"Radius -- select a polygon for preview",light:!0,max:100,min:1};return void 0!==t[11]&&(d.value=t[11]),o=new F({props:d}),H.push((()=>L(o,"value",u))),{c(){e=v("div"),b(n.$$.fragment),l=x(),b(o.$$.fragment),this.h()},l(t){e=w(t,"DIV",{class:!0});var s=O(e);P(n.$$.fragment,s),l=E(s),P(o.$$.fragment,s),s.forEach(A),this.h()},h(){k(e,"class","snap")},m(t,s){j(t,e,s),T(n,e,null),N(e,l),T(o,e,null),a=!0},p(t,e){const l={};!s&&1024&e[0]&&(s=!0,l.toggled=t[10],q((()=>s=!1))),n.$set(l);const a={};1024&e[0]&&(a.disabled=!t[10]),!i&&2048&e[0]&&(i=!0,a.value=t[11],q((()=>i=!1))),o.$set(a)},i(t){a||(I(n.$$.fragment,t),I(o.$$.fragment,t),a=!0)},o(t){B(n.$$.fragment,t),B(o.$$.fragment,t),a=!1},d(t){t&&A(e),_(n),_(o)}}}function Tt(t){let e,n,s=t[10]?"ON":"OFF";return{c(){e=W("Snap to other points: "),n=W(s)},l(t){e=K(t,"Snap to other points: "),n=K(t,s)},m(t,s){j(t,e,s),j(t,n,s)},p(t,e){1024&e[0]&&s!==(s=t[10]?"ON":"OFF")&&Q(n,s)},d(t){t&&A(e),t&&A(n)}}}function Dt(t){let e,n;return e=new Y({props:{class:"code",type:"multi",code:t[9]}}),{c(){b(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,s){T(e,t,s),n=!0},p(t,n){const s={};512&n[0]&&(s.code=t[9]),e.$set(s)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function It(t){let e,n,s=t[8],l=[];for(let i=0;i<s.length;i+=1)l[i]=Bt(jt(t,s,i));const o=t=>B(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=G()},l(t){for(let e=0;e<l.length;e+=1)l[e].l(t);e=G()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);j(t,e,s),n=!0},p(t,n){if(8449&n[0]){let i;for(s=t[8],i=0;i<s.length;i+=1){const o=jt(t,s,i);l[i]?(l[i].p(o,n),I(l[i],1)):(l[i]=Bt(o),l[i].c(),I(l[i],1),l[i].m(e.parentNode,e))}for(J(),i=s.length;i<l.length;i+=1)o(i);X()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)I(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)B(l[e]);n=!1},d(t){z(l,t),t&&A(e)}}}function Bt(t){let e,n,s;function l(e){t[28](e,t[34])}let o={inline:!0,light:!0,required:!0,size:"sm",labelText:t[34].name};return void 0!==t[13][t[0].id].attributes[t[34].name]&&(o.value=t[13][t[0].id].attributes[t[34].name]),e=new tt({props:o}),H.push((()=>L(e,"value",l))),{c(){b(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){T(e,t,n),s=!0},p(s,l){t=s;const o={};256&l[0]&&(o.labelText=t[34].name),!n&&8449&l[0]&&(n=!0,o.value=t[13][t[0].id].attributes[t[34].name],q((()=>n=!1))),e.$set(o)},i(t){s||(I(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){_(e,t)}}}function _t(t){let e,n,s,l,o,i,a,r,c,u,d,p,f,g,h,$,m,y=t[12]&&It(t);return{c(){y&&y.c(),e=W("\n      ========= ADD NEW (COMPONENT) ATTRIBUTE =========\n      "),n=v("div"),s=v("input"),l=x(),o=v("input"),i=x(),a=v("input"),r=W("global?"),c=x(),u=v("button"),d=W("add"),p=x(),f=v("button"),g=W("apply to all"),this.h()},l(t){y&&y.l(t),e=K(t,"\n      ========= ADD NEW (COMPONENT) ATTRIBUTE =========\n      "),n=w(t,"DIV",{class:!0});var h=O(n);s=w(h,"INPUT",{type:!0,class:!0}),l=E(h),o=w(h,"INPUT",{type:!0,class:!0}),i=E(h),a=w(h,"INPUT",{type:!0}),r=K(h,"global?"),h.forEach(A),c=E(t),u=w(t,"BUTTON",{class:!0});var $=O(u);d=K($,"add"),$.forEach(A),p=E(t),f=w(t,"BUTTON",{class:!0});var m=O(f);g=K(m,"apply to all"),m.forEach(A),this.h()},h(){k(s,"type","text"),k(s,"class","attributes__input"),k(o,"type","text"),k(o,"class","attributes__input"),k(a,"type","checkbox"),k(n,"class","attributes__row"),k(u,"class","attributes__submit"),k(f,"class","attributes__submit")},m(v,b){y&&y.m(v,b),j(v,e,b),j(v,n,b),N(n,s),Z(s,t[3]),N(n,l),N(n,o),Z(o,t[4]),N(n,i),N(n,a),a.checked=t[5],N(n,r),j(v,c,b),j(v,u,b),N(u,d),j(v,p,b),j(v,f,b),N(f,g),h=!0,$||(m=[D(s,"input",t[29]),D(o,"input",t[30]),D(a,"change",t[31]),D(u,"click",t[17])],$=!0)},p(t,n){t[12]?y?(y.p(t,n),4096&n[0]&&I(y,1)):(y=It(t),y.c(),I(y,1),y.m(e.parentNode,e)):y&&(J(),B(y,1,1,(()=>{y=null})),X()),8&n[0]&&s.value!==t[3]&&Z(s,t[3]),16&n[0]&&o.value!==t[4]&&Z(o,t[4]),32&n[0]&&(a.checked=t[5])},i(t){h||(I(y),h=!0)},o(t){B(y),h=!1},d(t){y&&y.d(t),t&&A(e),t&&A(n),t&&A(c),t&&A(u),t&&A(p),t&&A(f),$=!1,M(m)}}}function Mt(t){let e,n,s,l,o,i;return e=new V({props:{$$slots:{title:[Tt],default:[Nt]},$$scope:{ctx:t}}}),s=new V({props:{title:"CSS Code",$$slots:{default:[Dt]},$$scope:{ctx:t}}}),o=new V({props:{title:"Selected Polygon Attributes",disabled:!t[12],$$slots:{default:[_t]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment),n=x(),b(s.$$.fragment),l=x(),b(o.$$.fragment)},l(t){P(e.$$.fragment,t),n=E(t),P(s.$$.fragment,t),l=E(t),P(o.$$.fragment,t)},m(t,a){T(e,t,a),j(t,n,a),T(s,t,a),j(t,l,a),T(o,t,a),i=!0},p(t,n){const l={};3072&n[0]|64&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l);const i={};512&n[0]|64&n[1]&&(i.$$scope={dirty:n,ctx:t}),s.$set(i);const a={};4096&n[0]&&(a.disabled=!t[12]),12601&n[0]|64&n[1]&&(a.$$scope={dirty:n,ctx:t}),o.$set(a)},i(t){i||(I(e.$$.fragment,t),I(s.$$.fragment,t),I(o.$$.fragment,t),i=!0)},o(t){B(e.$$.fragment,t),B(s.$$.fragment,t),B(o.$$.fragment,t),i=!1},d(t){_(e,t),t&&A(n),_(s,t),t&&A(l),_(o,t)}}}function Rt(t){let e,n,s,l,o,i,a,r,c,u,d,p,f;return l=new g({props:{kind:"ghost",tooltipPosition:"bottom",tooltipAlignment:"center",iconDescription:"Click & Drag Toolbar",icon:h}}),i=new g({props:{kind:"ghost",tooltipPosition:"bottom",tooltipAlignment:"center",iconDescription:"Add New Polygon",icon:$,isSelected:"draw"===t[6]}}),i.$on("click",t[25]),r=new g({props:{kind:"ghost",tooltipPosition:"bottom",tooltipAlignment:"center",iconDescription:"Download SVG File",icon:m}}),r.$on("click",t[16]),u=new y({props:{$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){e=v("div"),n=v("div"),s=v("div"),b(l.$$.fragment),o=x(),b(i.$$.fragment),a=x(),b(r.$$.fragment),c=x(),b(u.$$.fragment),this.h()},l(t){e=w(t,"DIV",{class:!0,style:!0});var d=O(e);n=w(d,"DIV",{class:!0});var p=O(n);s=w(p,"DIV",{class:!0});var f=O(s);P(l.$$.fragment,f),f.forEach(A),o=E(p),P(i.$$.fragment,p),a=E(p),P(r.$$.fragment,p),p.forEach(A),c=E(d),P(u.$$.fragment,d),d.forEach(A),this.h()},h(){k(s,"class","handle"),k(n,"class","buttons"),k(e,"class","toolbar"),k(e,"style",t[7])},m(g,h){j(g,e,h),N(e,n),N(n,s),T(l,s,null),N(n,o),T(i,n,null),N(n,a),T(r,n,null),N(e,c),T(u,e,null),t[32](e),d=!0,p||(f=[D(s,"mousemove",t[14]),D(s,"mousedown",t[22]),D(s,"mouseup",t[23]),D(s,"mouseleave",t[24])],p=!0)},p(t,n){const s={};64&n[0]&&(s.isSelected="draw"===t[6]),i.$set(s);const l={};16185&n[0]|64&n[1]&&(l.$$scope={dirty:n,ctx:t}),u.$set(l),(!d||128&n[0])&&k(e,"style",t[7])},i(t){d||(I(l.$$.fragment,t),I(i.$$.fragment,t),I(r.$$.fragment,t),I(u.$$.fragment,t),d=!0)},o(t){B(l.$$.fragment,t),B(i.$$.fragment,t),B(r.$$.fragment,t),B(u.$$.fragment,t),d=!1},d(n){n&&A(e),_(l),_(i),_(r),_(u),t[32](null),p=!1,M(f)}}}function St(t,e,n){let s,l,o,i,c,u,d,p,f,g,h,$,m,y,v;R(t,pt,(t=>n(6,c=t))),R(t,ht,(t=>n(33,u=t))),R(t,wt,(t=>n(0,d=t))),R(t,bt,(t=>n(21,p=t))),R(t,ft,(t=>n(10,f=t))),R(t,gt,(t=>n(11,g=t))),R(t,yt,(t=>n(12,h=t))),R(t,Pt,(t=>n(13,$=t)));let b=!1,x="",w="",O=!0;const P=(t,e)=>{t.stopPropagation(),pt.set(c!==e?e:null)};S((()=>{const t=m.getBoundingClientRect();n(18,y=t.x),n(19,v=t.y)}));return t.$$.update=()=>{786432&t.$$.dirty[0]&&n(7,s=`left:${y}px;top:${v}px`),1&t.$$.dirty[0]&&n(8,l=d&&Object.entries(d.attributes).reduce(((t,[e,n])=>[...t,{name:e,value:n}]),[])),2097152&t.$$.dirty[0]&&n(20,o=Object.entries(p).reduce(((t,[e,n])=>`${t}  ${e}: ${n};\n`),"")),1048576&t.$$.dirty[0]&&n(9,i=`polygon {\n${o}}`)},[d,m,b,x,w,O,c,s,l,i,f,g,h,$,t=>{if(!b)return;const{movementX:e,movementY:s}=t;n(18,y+=e),n(19,v+=s)},P,()=>{const t=new Blob([u.outerHTML],{type:"image/svg+xml"});U.exports.saveAs(t,"graph.svg")},()=>{const t={name:x,value:w};Pt.addAttribute(d,t),O&&(({name:t,value:e})=>{bt.update((n=>r(a({},n),{[t]:e})))})(t),n(3,x=""),n(4,w="")},y,v,o,p,()=>n(2,b=!0),()=>n(2,b=!1),()=>n(2,b=!1),t=>P(t,"draw"),function(t){f=t,ft.set(f)},function(t){g=t,gt.set(g)},function(e,n){t.$$.not_equal($[d.id].attributes[n.name],e)&&($[d.id].attributes[n.name]=e,Pt.set($))},function(){x=this.value,n(3,x)},function(){w=this.value,n(4,w)},function(){O=this.checked,n(5,O)},function(t){H[t?"unshift":"push"]((()=>{m=t,n(1,m)}))}]}class Vt extends d{constructor(t){super(),p(this,t,St,Rt,f,{},[-1,-1])}}function Ut(t,e,n){const s=t.slice();return s[42]=e[n],s[44]=n,s}function Ht(t,e,n){const s=t.slice();return s[45]=e[n],s[47]=n,s}function Ct(t,e,n){const s=t.slice();return s[42]=e[n],s[49]=n,s}function Lt(t){let e,n;return{c(){e=new lt,n=G(),this.h()},l(t){e=et(t),n=G(),this.h()},h(){e.a=n},m(s,l){e.m(t[12],s,l),j(s,n,l)},p(t,n){4096&n[0]&&e.p(t[12])},d(t){t&&A(n),t&&e.d()}}}function Ft(t){let e;return{c(){e=W("nope")},l(t){e=K(t,"nope")},m(t,n){j(t,e,n)},p:it,i:it,o:it,d(t){t&&A(e)}}}function qt(t){let e,n;return e=new at({props:{multiple:!1}}),e.$on("drop",t[16]),{c(){b(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,s){T(e,t,s),n=!0},p:it,i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){B(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Wt(t){let e,n,s,l,o,i,a,r,c,u,d=t[13],p=[];for(let h=0;h<d.length;h+=1)p[h]=Kt(Ct(t,d,h));let f=t[13],g=[];for(let h=0;h<f.length;h+=1)g[h]=Yt(Ut(t,f,h));return{c(){e=v("div"),n=v("img"),o=x(),i=rt("svg");for(let t=0;t<p.length;t+=1)p[t].c();r=x();for(let t=0;t<g.length;t+=1)g[t].c();this.h()},l(t){e=w(t,"DIV",{class:!0});var s=O(e);n=w(s,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),o=E(s),i=w(s,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0},1);var l=O(i);for(let e=0;e<p.length;e+=1)p[e].l(l);l.forEach(A),r=E(s);for(let e=0;e<g.length;e+=1)g[e].l(s);s.forEach(A),this.h()},h(){n.src!==(s=t[0])&&k(n,"src",s),k(n,"alt",""),k(n,"width",t[2]),k(n,"height",t[3]),k(n,"style",l=`width:${t[2]}px;height:${t[3]}px;`),k(i,"xmlns","http://www.w3.org/2000/svg"),k(i,"width",t[2]),k(i,"height",t[3]),k(i,"viewBox",a=`0 0 ${t[2]} ${t[3]}`),k(e,"class","render")},m(s,l){j(s,e,l),N(e,n),t[29](n),N(e,o),N(e,i);for(let t=0;t<p.length;t+=1)p[t].m(i,null);t[33](i),N(e,r);for(let t=0;t<g.length;t+=1)g[t].m(e,null);c||(u=D(n,"load",t[15]),c=!0)},p(t,o){if(1&o[0]&&n.src!==(s=t[0])&&k(n,"src",s),4&o[0]&&k(n,"width",t[2]),8&o[0]&&k(n,"height",t[3]),12&o[0]&&l!==(l=`width:${t[2]}px;height:${t[3]}px;`)&&k(n,"style",l),29387968&o[0]){let e;for(d=t[13],e=0;e<d.length;e+=1){const n=Ct(t,d,e);p[e]?p[e].p(n,o):(p[e]=Kt(n),p[e].c(),p[e].m(i,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=d.length}if(4&o[0]&&k(i,"width",t[2]),8&o[0]&&k(i,"height",t[3]),12&o[0]&&a!==(a=`0 0 ${t[2]} ${t[3]}`)&&k(i,"viewBox",a),100673792&o[0]){let n;for(f=t[13],n=0;n<f.length;n+=1){const s=Ut(t,f,n);g[n]?g[n].p(s,o):(g[n]=Yt(s),g[n].c(),g[n].m(e,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=f.length}},i:it,o:it,d(n){n&&A(e),t[29](null),z(p,n),t[33](null),z(g,n),c=!1,u()}}}function Kt(t){let e,n,s,l,o,i=[{points:n=t[42].points},{id:s=t[42].id},t[42].attributes],a={};for(let d=0;d<i.length;d+=1)a=dt(a,i[d]);function r(...e){return t[30](t[42],...e)}function c(...e){return t[31](t[42],...e)}function u(...e){return t[32](t[42],...e)}return{c(){e=rt("polygon"),this.h()},l(t){e=w(t,"polygon",{points:!0,id:!0},1),O(e).forEach(A),this.h()},h(){var n;ct(e,a),st(e,"is-drawing","draw"===t[6]&&t[42].id===(null==(n=t[7])?void 0:n.id)),st(e,"is-dragging",t[42].id===t[10]),st(e,"is-hovered",t[42].id===t[14]),st(e,"is-selected",t[42].id===t[11])},m(t,n){j(t,e,n),l||(o=[D(e,"mousedown",r),D(e,"mouseenter",c),D(e,"mouseleave",u)],l=!0)},p(l,o){var r;t=l,ct(e,a=ut(i,[8192&o[0]&&n!==(n=t[42].points)&&{points:n},8192&o[0]&&s!==(s=t[42].id)&&{id:s},8192&o[0]&&t[42].attributes])),st(e,"is-drawing","draw"===t[6]&&t[42].id===(null==(r=t[7])?void 0:r.id)),st(e,"is-dragging",t[42].id===t[10]),st(e,"is-hovered",t[42].id===t[14]),st(e,"is-selected",t[42].id===t[11])},d(t){t&&A(e),l=!1,M(o)}}}function Qt(t){let e,n,s,l,o;function i(...e){return t[34](t[45],t[42],...e)}function a(...e){return t[35](t[45],t[42],...e)}return{c(){e=v("div"),this.h()},l(t){e=w(t,"DIV",{style:!0,class:!0,id:!0,tabindex:!0}),O(e).forEach(A),this.h()},h(){k(e,"style",n=`left:${t[45].x}px;top:${t[45].y}px;`),k(e,"class","point"),k(e,"id",s=t[45].id),k(e,"tabindex","0"),st(e,"is-polygon-selected",t[42].id===t[11]),st(e,"is-dragable",t[45].id===t[8])},m(t,n){j(t,e,n),l||(o=[D(e,"mousedown",i),D(e,"mouseleave",a)],l=!0)},p(l,o){t=l,8192&o[0]&&n!==(n=`left:${t[45].x}px;top:${t[45].y}px;`)&&k(e,"style",n),8192&o[0]&&s!==(s=t[45].id)&&k(e,"id",s),10240&o[0]&&st(e,"is-polygon-selected",t[42].id===t[11]),8448&o[0]&&st(e,"is-dragable",t[45].id===t[8])},d(t){t&&A(e),l=!1,M(o)}}}function Yt(t){let e,n=t[42].pointsMap,s=[];for(let l=0;l<n.length;l+=1)s[l]=Qt(Ht(t,n,l));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=G()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=G()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);j(t,e,n)},p(t,l){if(100673792&l[0]){let o;for(n=t[42].pointsMap,o=0;o<n.length;o+=1){const i=Ht(t,n,o);s[o]?s[o].p(i,l):(s[o]=Qt(i),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},d(t){z(s,t),t&&A(e)}}}function Gt(t){let e,n,s,l,o,i,a,r,c,u,d,p=t[9]&&Lt(t);l=new Vt({}),l.$on("add-attribute",t[28]);const f=[Wt,qt,Ft],g=[];function h(t,e){return t[0]?0:t[0]?2:1}return i=h(t),a=g[i]=f[i](t),{c(){e=x(),n=v("div"),p&&p.c(),s=x(),b(l.$$.fragment),o=x(),a.c(),this.h()},l(t){nt('[data-svelte="svelte-n3ior8"]',document.head).forEach(A),e=E(t),n=w(t,"DIV",{class:!0,style:!0});var i=O(n);p&&p.l(i),s=E(i),P(l.$$.fragment,i),o=E(i),a.l(i),i.forEach(A),this.h()},h(){document.title="Home",k(n,"class","canvas"),k(n,"style",r=`--snapRadius:${t[5]}px`),st(n,"is-drawing","draw"===t[6])},m(a,r){j(a,e,r),j(a,n,r),p&&p.m(n,null),N(n,s),T(l,n,null),N(n,o),g[i].m(n,null),c=!0,u||(d=[D(window,"keydown",t[27]),D(n,"scroll",t[18]),D(n,"click",t[17]),D(n,"mousedown",t[19]),D(n,"mousemove",t[20]),D(n,"mouseup",t[21])],u=!0)},p(t,e){t[9]?p?p.p(t,e):(p=Lt(t),p.c(),p.m(n,s)):p&&(p.d(1),p=null);let l=i;i=h(t),i===l?g[i].p(t,e):(J(),B(g[l],1,1,(()=>{g[l]=null})),X(),a=g[i],a?a.p(t,e):(a=g[i]=f[i](t),a.c()),I(a,1),a.m(n,null)),(!c||32&e[0]&&r!==(r=`--snapRadius:${t[5]}px`))&&k(n,"style",r),64&e[0]&&st(n,"is-drawing","draw"===t[6])},i(t){c||(I(l.$$.fragment,t),I(a),c=!0)},o(t){B(l.$$.fragment,t),B(a),c=!1},d(t){t&&A(e),t&&A(n),p&&p.d(),_(l),g[i].d(),u=!1,M(d)}}}const Jt=!0,Xt=!1;function zt(t,e,n){let s,l,o,i,c,u,d,p,f,g,h,$,m,y;R(t,gt,(t=>n(5,l=t))),R(t,pt,(t=>n(6,o=t))),R(t,kt,(t=>n(7,i=t))),R(t,bt,(t=>n(37,c=t))),R(t,ft,(t=>n(38,u=t))),R(t,At,(t=>n(39,d=t))),R(t,vt,(t=>n(8,p=t))),R(t,wt,(t=>n(9,f=t))),R(t,mt,(t=>n(10,g=t))),R(t,Ot,(t=>n(40,h=t))),R(t,yt,(t=>n(11,$=t))),R(t,Et,(t=>n(13,m=t))),R(t,$t,(t=>n(14,y=t)));let v,b,x="https://images.unsplash.com/photo-1607629823685-ae0850607241?auto=format&fit=crop&w=900&height=600&q=80",w=900,O=600;const P=({points:t,x:e,y:n})=>{const s=Object.values(t).filter((t=>t.x>e-l&&t.x<e+l)).filter((t=>t.y>n-l&&t.y<n+l)).reduce(((t,s)=>{const l=s.x-e,o=s.y-n,i=Math.sqrt(Math.pow(l,2)+Math.pow(o,2));return null==t||i<=t.diff?r(a({},s),{diff:i}):t}),{diff:l});return s.id?s:null},A=({e:t,polygon:e})=>{$t.set(e.id)},E=({e:t,polygon:e})=>{mt.set(e.id),yt.set(e.id)},k=({e:t,polygon:e})=>{t.path.filter(((e,n)=>n<t.path.length-2)).some((t=>t.matches("polygon")))||(mt.set(null),$t.set(null))},j=({e:t,point:e,polygon:n})=>{yt.set(n.id),vt.set(e.id)},N=({e:t,point:e,polygon:n})=>{t.path.filter(((e,n)=>n<t.path.length-2)).some((t=>t.matches(".point")))||vt.set(null)};S((()=>{ht.set(b)}));return n(12,s='<style>polygon[points=""]{fill:red;}</style>'),[x,v,w,O,b,l,o,i,p,f,g,$,'<style>polygon[points=""]{fill:red;}</style>',m,y,t=>{n(2,w=v.naturalWidth),n(3,O=v.naturalHeight)},t=>{const{acceptedFiles:e,fileRejections:s}=t.detail,l=new FileReader,[o]=e;l.readAsDataURL(o),l.onload=()=>{n(0,x=l.result)}},({x:t,y:e,path:n})=>{var s,l;const a=n.filter(((t,e)=>e<n.length-2)),r=a.some((t=>t.matches("polygon"))),p=a.some((t=>t.matches(".point"))),f=a.some((t=>t.matches(".toolbar")));if(r||p||f||yt.set(null),(f||p)&&kt.set(null),"draw"!==o)return;i||(yt.set(null),kt.set({attributes:c,id:ot(6),points:{}}));const g=ot(6),h=u&&d.filter((({id:t})=>t!==i.id)).reduce(((n,{points:s})=>{var l;return null!=(l=P({points:s,x:t,y:e}))?l:n}),null);kt.addPoint({x:null!=(s=null==h?void 0:h.x)?s:t,y:null!=(l=null==h?void 0:h.y)?l:e,id:g}),yt.set(i.id),Pt.addPolygon(i)},t=>{console.log(t)},t=>{},({x:t,y:e,movementX:n,movementY:s})=>{if(!p||!f)return g?(kt.set(null),pt.set(null),void Pt.moveAllPoints(h,n,s)):void 0;Pt.movePoint(f,p,t,e)},t=>{if(g&&mt.set(null),p){if(u){const{x:t,y:e}=f.points[p],n=d.filter((({id:t})=>t!==$)).reduce(((n,{points:s})=>{var l;return null!=(l=P({points:s,x:t,y:e}))?l:n}),null);n&&Pt.movePoint(f,p,n.x,n.y)}vt.set(null)}},A,E,k,j,N,t=>{"Escape"===t.key&&(kt.set(null),pt.set(null),mt.set(null)),"Enter"===t.key&&(i&&yt.set(i.id),pt.set(null))},({detail:t})=>{Pt[wt.id].attributes[t.name]=t.value},function(t){H[t?"unshift":"push"]((()=>{v=t,n(1,v)}))},(t,e)=>E({e:e,polygon:t}),(t,e)=>A({e:e,polygon:t}),(t,e)=>k({e:e,polygon:t}),function(t){H[t?"unshift":"push"]((()=>{b=t,n(4,b)}))},(t,e,n)=>j({e:n,point:t,polygon:e}),(t,e,n)=>N({e:n,point:t,polygon:e})]}export default class extends d{constructor(t){super(),p(this,t,zt,Gt,f,{},[-1,-1])}}export{Jt as prerender,Xt as ssr};
